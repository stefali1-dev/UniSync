<div class="relative h-full flex flex-col md:flex-row overflow-hidden">
  <style>
    .flex-1 {
      flex: 1 1 auto;
    }
  </style>

  <!-- First element -->
  <div class="relative flex-1 flex flex-col overflow-hidden">
    <div class="px-6 bg-foreground border-b h-16 flex-none flex items-center">
      <button
        (click)="openDrawer()"
        class="md:hidden sm:-ml-4 mr-2"
        mat-icon-button
        type="button">
        <mat-icon svgIcon="mat:menu"></mat-icon>
      </button>
      <div class="flex items-center gap-3">
        <img
          class="hidden sm:block flex-none w-9 h-9 rounded-full"
          src="{{ chat?.imageUrl }}" />
        <div class="flex-1 truncate">
          <div class="font-semibold text-sm truncate">{{ chat?.name }}</div>
          <div class="flex items-center gap-1 truncate">
            <div class="h-1.5 w-1.5 rounded-full"></div>
            <!-- <div class="text-xs text-gray-600 dark:text-gray-400 truncate">
              Online
            </div> -->
          </div>
        </div>
      </div>

      <span class="flex-1"></span>

      <div class="flex-none flex items-center gap-1 mr-1">
        <button mat-icon-button type="button">
          <mat-icon svgIcon="mat:search"></mat-icon>
        </button>
        <button mat-icon-button type="button" (click)="this.toggleInfo()">
          <mat-icon svgIcon="mat:info"></mat-icon>
        </button>
      </div>
    </div>

    <vex-scrollbar class="flex-1">
      <div class="flex flex-col space-y-2 p-8 justify-end">
        <ng-container *ngFor="let message of this.chatService.messages$ | async">
          <div *ngIf="isIncomingMessage(message)" class="flex gap-2 self-start">
            <div class="mt-4 flex">
              <img class="w-8 h-8 rounded-full self-end" src="{{message.senderPhotoUrl}}" />
              <div class="flex flex-col space-y-2">
                <div class="px-4 py-3 rounded-xl rounded-bl-none bg-gray-200 dark:bg-gray-800 inline-flex max-w-[350px]">
                  {{message.message}}
                </div>
              </div>
            </div>

          </div>
          <div *ngIf="!isIncomingMessage(message)" class="flex gap-2 self-end">
            <div class="px-4 py-3 rounded-xl rounded-br-none bg-primary-600 text-white inline-flex max-w-[350px]">
              {{message.message}}
            </div>
          </div>
        </ng-container>
      </div>
    </vex-scrollbar>

    <div class="flex-none bg-foreground border-t">
      <div class="relative h-16 flex items-center justify-between">
        <button
          [matMenuTriggerFor]="addMenuButton"
          class="z-10 ml-4"
          color="primary"
          mat-mini-fab
          type="button">
          <mat-icon svgIcon="mat:add"></mat-icon>
        </button>

        <mat-menu #addMenuButton="matMenu" xPosition="after" yPosition="above">
          <button mat-menu-item>
            <mat-icon matMenuItemIcon svgIcon="mat:attach_file"></mat-icon>
            <span>Upload File</span>
          </button>
          <mat-divider></mat-divider>
          <button mat-menu-item>
            <mat-icon matMenuItemIcon svgIcon="mat:text_snippet"></mat-icon>
            <span>Create Text Snippet</span>
          </button>
          <button mat-menu-item>
            <mat-icon matMenuItemIcon svgIcon="mat:draw"></mat-icon>
            <span>Start Drawing Canvas</span>
          </button>
          <button mat-menu-item>
            <mat-icon matMenuItemIcon svgIcon="mat:event"></mat-icon>
            <span>Schedule Meeting</span>
          </button>
        </mat-menu>

        <form [formGroup]="form">
          <input
            class="z-0 absolute top-0 right-0 bottom-0 left-0 h-full w-full border-0 focus:border-0 px-20 bg-transparent"
            placeholder="Type your message ..."
            type="text"
            formControlName="message"
          />
          <button
            class="relative z-10 mr-4"
            mat-icon-button
            type="button"
            (click)="send()"
          >
            <mat-icon svgIcon="mat:send"></mat-icon>
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Second element -->
  <div [ngClass]="{'hidden': !showChatInfo, 'block md:w-1/3 border-l-4 border-gray-300': showChatInfo}" class="md:overflow-auto bg-gray-100">
    <div class="container p-0">

        <div class="px-6 bg-foreground border-b h-16 flex-none flex items-center p-0">
          <h2 class="text-2xl font-semibold mb-4">Participants</h2>

        </div>

        <ul class="space-y-3">
          <li class="flex items-center p-3 bg-gray-100 rounded-md">
            <div class="flex-shrink-0">
              <img class="h-10 w-10 rounded-full" src="" alt="User avatar">
            </div>
            <div class="ml-4">
              <div class="text-sm font-medium text-gray-900">John Doe</div>
            </div>
          </li>
          <li class="flex items-center p-3 bg-gray-100 rounded-md">
            <div class="flex-shrink-0">
              <img class="h-10 w-10 rounded-full" src="" alt="User avatar">
            </div>
            <div class="ml-4">
              <div class="text-sm font-medium text-gray-900">Jane Smith</div>
            </div>
          </li>
          <li class="flex items-center p-3 bg-gray-100 rounded-md">
            <div class="flex-shrink-0">
              <img class="h-10 w-10 rounded-full" src="" alt="User avatar">
            </div>
            <div class="ml-4">
              <div class="text-sm font-medium text-gray-900">Alex Johnson</div>
            </div>
          </li>
        </ul>
      </div>
    </div>
</div>